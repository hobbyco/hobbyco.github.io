<!DOCTYPE html>
<html lang="ko">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KFCTS5DZ6V"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-KFCTS5DZ6V');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>ÎπÑÎîîÏò§ Ìè¨Ïª§ AI ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ | ÌÅ¥ÎûòÏãù Ïû≠Ïä§ Ïò§Ïñ¥ Î≤†ÌÑ∞</title>
    <meta name="description" content="ÌÅ¥ÎûòÏãù Ïπ¥ÏßÄÎÖ∏ Ïä§ÌÉÄÏùºÏùò ÎπÑÎîîÏò§ Ìè¨Ïª§Î•º Ï¶êÍ≤®Î≥¥ÏÑ∏Ïöî. Ïû≠Ïä§ Ïò§Ïñ¥ Î≤†ÌÑ∞ Î£∞ Í∏∞Î∞òÏùò Ï†ïÌÜµ Ìè¨Ïª§ Î®∏Ïã† ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ÏûÖÎãàÎã§.">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;800;900&display=swap');

        :root {
            --casino-blue: #0044cc;
            --felt-blue: #002288;
            --gold: #fbbf24;
            --gold-dark: #d97706;
            --danger: #ef4444;
            --card-white: #ffffff;
            --text-main: #1a1a1a;
            --border-gold: rgba(251, 191, 36, 0.3);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }

        body {
            font-family: 'Pretendard', sans-serif;
            background: #f8fafc;
            color: #1e293b;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .main-content {
            flex: 1;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 20px;
        }

        .game-header-top {
            text-align: center;
            margin-bottom: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .game-badge {
            color: #1e40af;
            font-size: 1.125rem;
            font-weight: 700;
            letter-spacing: 0.35em; 
            text-transform: uppercase;
            margin-bottom: 1.5rem;
        }

        .game-header-top h1 {
            font-size: 3rem; 
            line-height: 1.1;
            margin: 0 0 0.5rem 0;
            color: var(--text-main);
            font-weight: 900; 
            letter-spacing: -0.05em; 
            display: flex;
            align-items: baseline;
            justify-content: center;
        }

        .game-header-top .dot {
            display: inline-block;
            width: 12px;
            height: 12px;
            background-color: var(--gold);
            border-radius: 50%;
            margin-left: 6px;
            transform: translateY(-4px);
        }

        .header-subtitle {
            font-size: 1rem; 
            color: #6b7280; 
            font-weight: 500;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .app-container {
            width: 100%;
            max-width: 600px;
            background: radial-gradient(circle at center, #0055ff 0%, #002288 100%);
            border-radius: 32px;
            border: 2px solid var(--border-gold);
            padding: 24px 32px 32px 32px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            position: relative;
            color: white;
        }

        .lang-control-box {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            margin-bottom: 20px;
            gap: 8px;
        }

        .lang-label {
            background: white;
            color: #1e293b;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: background 0.2s;
            text-decoration: none; /* Í∞ÄÏù¥Îìú Î≤ÑÌäºÏö© */
        }

        .lang-label:hover { background: #f1f5f9; }

        #lang-select {
            background: transparent;
            border: none;
            outline: none;
            cursor: pointer;
            font-weight: 800;
            font-family: inherit;
            color: inherit;
            margin-left: 2px;
        }

        @media (max-width: 480px) {
            .app-container { padding: 16px; border-radius: 20px; }
            .game-header-top h1 { font-size: 2.25rem; }
        }

        .pay-table {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border-gold);
            border-radius: 16px;
            padding: 10px;
            font-size: 0.75rem;
            margin-bottom: 24px;
        }
        .pay-row { display: flex; justify-content: space-between; padding: 3px 8px; border-radius: 4px; }
        .pay-row.active { background: var(--gold); color: #000; font-weight: 800; }

        .status-display { 
            text-align: center; 
            font-size: 1.25rem; 
            font-weight: 800; 
            color: var(--gold); 
            height: 36px; 
            margin-bottom: 24px;
            text-transform: uppercase; 
        }

        .hand-container { display: flex; justify-content: space-between; gap: 8px; height: 120px; margin-bottom: 24px; perspective: 1000px; }
        .card-wrapper { flex: 1; position: relative; cursor: pointer; transform-style: preserve-3d; transition: transform 0.2s; }
        .card { width: 100%; height: 100%; position: absolute; backface-visibility: hidden; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; box-shadow: 0 4px 8px rgba(0,0,0,0.3); }
        .card.front { background: white; color: black; transform: rotateY(0deg); }
        .card.front.red { color: var(--danger); }
        .card.back { background: #b30000; border: 3px solid white; transform: rotateY(180deg); }
        .card-wrapper.flipped { transform: rotateY(180deg); }
        
        .card-wrapper.held { transform: translateY(-8px); }
        .held-tag { position: absolute; top: -22px; left: 50%; transform: translateX(-50%); background: var(--gold); color: black; font-size: 10px; font-weight: 900; padding: 2px 6px; border-radius: 4px; opacity: 0; }
        .card-wrapper.held .held-tag { opacity: 1; }

        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; }
        .stat-card { background: rgba(0, 0, 0, 0.3); border: 1px solid var(--border-gold); padding: 12px; border-radius: 16px; text-align: center; }
        .stat-label { font-size: 0.7rem; color: var(--gold); font-weight: 600; }
        .stat-value { font-size: 1.2rem; font-weight: 800; }

        .action-bar { display: grid; grid-template-columns: 1.2fr 1.8fr; gap: 12px; }
        button { padding: 16px; border-radius: 16px; font-weight: 800; cursor: pointer; transition: all 0.2s; border: none; }
        .btn-bet { background: rgba(255, 255, 255, 0.1); color: white; border: 1px solid rgba(255,255,255,0.2); font-size: 0.8rem; }
        .btn-deal { background: var(--gold); color: black; font-size: 1.1rem; box-shadow: 0 4px 0 var(--gold-dark); }
        button:disabled { opacity: 0.3; cursor: not-allowed; transform: none !important; box-shadow: none !important; }
        button:active:not(:disabled) { transform: translateY(2px); }

        #footer-placeholder { width: 100%; max-width: 500px; margin: 2rem auto; }
    </style>
</head>
<body>

<div class="main-content">
    <header class="game-header-top">
        <div class="game-badge">CASINO SERIES</div>
        <h1 id="main-title">ÎπÑÎîîÏò§ Ìè¨Ïª§ AI<span class="dot"></span></h1>
        <p class="header-subtitle" id="main-subtitle">ÏµúÏ†ÅÏùò ÌôïÎ•†Î°ú Ïπ¥ÎìúÎ•º ÏÑ†ÌÉùÌïòÍ≥† ÎÜíÏùÄ Ï°±Î≥¥Î•º ÏôÑÏÑ±Ìï¥ Î≥¥ÏÑ∏Ïöî.</p>
    </header>

    <div class="app-container">
        <div class="lang-control-box">
            <a id="guide-btn" href="vp-guide-kr.html" class="lang-label">
                <i data-lucide="help-circle" style="width:14px; height:14px;"></i>
                <span id="guide-text">ÎπÑÎîîÏò§ Ìè¨Ïª§ Í∞ÄÏù¥Îìú</span>
            </a>
            
            <label for="lang-select" class="lang-label">
                <span>Language :</span>
                <select id="lang-select">
                    <option value="ko">üá∞üá∑ KO</option>
                    <option value="en">üá¨üáß EN</option>
                </select>
            </label>
        </div>

        <div class="pay-table" id="pay-table"></div>

        <div class="status-display" id="status-msg">PLACE YOUR BET</div>

        <div class="hand-container" id="card-area">
            <div class="card-wrapper flipped" id="card-0" onclick="game.toggleHold(0)">
                <div class="held-tag">HELD</div>
                <div class="card front"><div class="text-xl font-black val"></div><div class="text-3xl suit"></div></div>
                <div class="card back"></div>
            </div>
            <div class="card-wrapper flipped" id="card-1" onclick="game.toggleHold(1)">
                <div class="held-tag">HELD</div>
                <div class="card front"><div class="text-xl font-black val"></div><div class="text-3xl suit"></div></div>
                <div class="card back"></div>
            </div>
            <div class="card-wrapper flipped" id="card-2" onclick="game.toggleHold(2)">
                <div class="held-tag">HELD</div>
                <div class="card front"><div class="text-xl font-black val"></div><div class="text-3xl suit"></div></div>
                <div class="card back"></div>
            </div>
            <div class="card-wrapper flipped" id="card-3" onclick="game.toggleHold(3)">
                <div class="held-tag">HELD</div>
                <div class="card front"><div class="text-xl font-black val"></div><div class="text-3xl suit"></div></div>
                <div class="card back"></div>
            </div>
            <div class="card-wrapper flipped" id="card-4" onclick="game.toggleHold(4)">
                <div class="held-tag">HELD</div>
                <div class="card front"><div class="text-xl font-black val"></div><div class="text-3xl suit"></div></div>
                <div class="card back"></div>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label" id="lbl-balance">CREDIT</div>
                <div class="stat-value">$<span id="credits">1000</span></div>
            </div>
            <div class="stat-card">
                <div class="stat-label" id="lbl-bet">BET</div>
                <div class="stat-value"><span id="current-bet">1</span></div>
            </div>
        </div>

        <div class="action-bar">
            <button id="bet-btn" class="btn-bet" onclick="game.cycleBet()">Î≤†ÌåÖ(ÏµúÎåÄ : 5)</button>
            <button id="deal-btn" class="btn-deal" onclick="game.handleAction()">Îîú (ÏãúÏûë)</button>
        </div>
    </div>
</div>

<div id="footer-placeholder"></div>

<script>
    const i18n = {
        ko: {
            title: "ÎπÑÎîîÏò§ Ìè¨Ïª§ AI",
            subtitle: "ÏµúÏ†ÅÏùò ÌôïÎ•†Î°ú Ïπ¥ÎìúÎ•º ÏÑ†ÌÉùÌïòÍ≥† ÎÜíÏùÄ Ï°±Î≥¥Î•º ÏôÑÏÑ±Ìï¥ Î≥¥ÏÑ∏Ïöî.",
            balance: "Î≥¥Ïú† ÏûêÏÇ∞", bet: "Î≤†ÌåÖÏï°",
            betBtn: "Î≤†ÌåÖ(ÏµúÎåÄ : 5)", deal: "Îîú (ÏãúÏûë)", draw: "ÎìúÎ°úÏö∞ (ÍµêÏ≤¥)",
            wait: "Î≤†ÌåÖÏùÑ Ìï¥Ï£ºÏÑ∏Ïöî", holdDraw: "ÌôÄÎìú ÏÑ†ÌÉù ÌõÑ ÎìúÎ°úÏö∞!",
            ranks: ["Î°úÏó¥ ÌîåÎü¨Ïâ¨", "Ïä§Ìä∏Î†àÏù¥Ìä∏ ÌîåÎü¨Ïâ¨", "Ìè¨ Ïπ¥Îìú", "ÌíÄ ÌïòÏö∞Ïä§", "ÌîåÎü¨Ïâ¨", "Ïä§Ìä∏Î†àÏù¥Ìä∏", "Ìä∏Î¶¨Ìîå", "Ìà¨ ÌéòÏñ¥", "Ïû≠Ïä§ Ïò§Ïñ¥ Î≤†ÌÑ∞"],
            win: "ÏäπÎ¶¨!", lose: "Îã§Ïãú ÎèÑÏ†ÑÌïòÏÑ∏Ïöî",
            guideText: "ÎπÑÎîîÏò§ Ìè¨Ïª§ Í∞ÄÏù¥Îìú", guideLink: "vp-guide-kr.html"
        },
        en: {
            title: "Video Poker AI",
            subtitle: "Strategize your hand and aim for the best winning combination.",
            balance: "CREDIT", bet: "BET",
            betBtn: "BET (Max: 5)", deal: "DEAL", draw: "DRAW",
            wait: "PLACE YOUR BET", holdDraw: "HOLD & DRAW!",
            ranks: ["Royal Flush", "Straight Flush", "4 of a Kind", "Full House", "Flush", "Straight", "3 of a Kind", "Two Pair", "Jacks or Better"],
            win: "WIN!", lose: "TRY AGAIN",
            guideText: "Video Poker Guide", guideLink: "vp-guide-en.html"
        }
    };

    const game = {
        lang: 'ko',
        credits: parseInt(localStorage.getItem('vp_credits')) || 1000,
        bet: 1,
        state: 'IDLE',
        deck: [], hand: [], holds: [false, false, false, false, false],
        payouts: [250, 50, 25, 9, 6, 4, 3, 2, 1],
        
        init() {
            this.renderPayTable();
            this.updateUI();
            document.getElementById('lang-select').onchange = (e) => {
                this.lang = e.target.value;
                this.renderPayTable();
                this.updateUI();
            };
            this.loadFooter();
        },

        renderPayTable() {
            const t = i18n[this.lang];
            const html = this.payouts.map((p, i) => `
                <div class="pay-row" id="rank-${8-i}">
                    <span>${t.ranks[i]}</span>
                    <span>${p * this.bet}</span>
                </div>
            `).join('');
            document.getElementById('pay-table').innerHTML = html;
        },

        updateUI() {
            const t = i18n[this.lang];
            document.getElementById('main-title').innerHTML = `${t.title}<span class="dot"></span>`;
            document.getElementById('main-subtitle').textContent = t.subtitle;
            document.getElementById('lbl-balance').textContent = t.balance;
            document.getElementById('lbl-bet').textContent = t.bet;
            document.getElementById('credits').textContent = this.credits;
            document.getElementById('current-bet').textContent = this.bet;
            
            document.getElementById('bet-btn').textContent = t.betBtn;
            const dealBtn = document.getElementById('deal-btn');
            dealBtn.textContent = this.state === 'DEALT' ? t.draw : t.deal;
            
            // Í∞ÄÏù¥Îìú Î≤ÑÌäº ÌÖçÏä§Ìä∏ Î∞è ÎßÅÌÅ¨ ÏóÖÎç∞Ïù¥Ìä∏
            const guideBtn = document.getElementById('guide-btn');
            const guideText = document.getElementById('guide-text');
            if (guideBtn && guideText) {
                guideBtn.href = t.guideLink;
                guideText.textContent = t.guideText;
            }

            document.getElementById('bet-btn').disabled = (this.state !== 'IDLE');
            dealBtn.disabled = (this.state === 'BUSY');

            if(this.state === 'IDLE') document.getElementById('status-msg').textContent = t.wait;
            if(this.state === 'DEALT') document.getElementById('status-msg').textContent = t.holdDraw;

            // ÏïÑÏù¥ÏΩò Î†åÎçîÎßÅ ÌôïÏù∏ (lucide ÏÇ¨Ïö© Ïãú)
            if (typeof lucide !== 'undefined') lucide.createIcons();
        },

        cycleBet() {
            this.bet = this.bet >= 5 ? 1 : this.bet + 1;
            this.renderPayTable();
            this.updateUI();
        },

        handleAction() {
            if(this.state === 'IDLE') this.deal();
            else if(this.state === 'DEALT') this.draw();
        },

        async deal() {
            if(this.credits < this.bet) return;
            this.state = 'BUSY';
            this.credits -= this.bet;
            this.updateUI();
            this.resetCards();

            this.createDeck();
            this.hand = this.deck.splice(0, 5);
            this.holds = [false, false, false, false, false];

            for(let i=0; i<5; i++) {
                this.renderCard(i);
                await this.flipCard(i, false);
                await new Promise(r => setTimeout(r, 100));
            }
            this.state = 'DEALT';
            this.updateUI();
        },

        async draw() {
            this.state = 'BUSY';
            this.updateUI();
            for(let i=0; i<5; i++) {
                if(!this.holds[i]) {
                    await this.flipCard(i, true);
                    this.hand[i] = this.deck.splice(0, 1)[0];
                    this.renderCard(i);
                    await this.flipCard(i, false);
                }
            }
            this.checkWinner();
            this.state = 'IDLE';
            this.updateUI();
        },

        toggleHold(i) {
            if(this.state !== 'DEALT') return;
            this.holds[i] = !this.holds[i];
            document.getElementById(`card-${i}`).classList.toggle('held');
        },

        createDeck() {
            const suits = ['‚ô†', '‚ô•', '‚ô¶', '‚ô£'];
            const vals = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
            this.deck = [];
            suits.forEach(s => vals.forEach((v, i) => {
                this.deck.push({ v, s, color: (s==='‚ô•'||s==='‚ô¶')?'red':'black', rank: i+2 });
            }));
            this.deck.sort(() => Math.random() - 0.5);
        },

        renderCard(i) {
            const card = this.hand[i];
            const el = document.getElementById(`card-${i}`).querySelector('.front');
            el.className = `card front ${card.color}`;
            el.querySelector('.val').textContent = card.v;
            el.querySelector('.suit').textContent = card.s;
        },

        async flipCard(i, isBack) {
            const el = document.getElementById(`card-${i}`);
            isBack ? el.classList.add('flipped') : el.classList.remove('flipped');
            return new Promise(r => setTimeout(r, 150));
        },

        resetCards() {
            document.querySelectorAll('.card-wrapper').forEach(el => {
                el.classList.add('flipped');
                el.classList.remove('held');
            });
            document.querySelectorAll('.pay-row').forEach(r => r.classList.remove('active'));
        },

        checkWinner() {
            const ranks = this.hand.map(c => c.rank).sort((a,b) => a-b);
            const suits = this.hand.map(c => c.s);
            const isFlush = new Set(suits).size === 1;
            const isStraight = ranks.every((r, i) => i === 0 || r === ranks[i-1] + 1) || (JSON.stringify(ranks) === JSON.stringify([2,3,4,5,14]));
            const counts = {}; ranks.forEach(r => counts[r] = (counts[r] || 0) + 1);
            const valCounts = Object.values(counts).sort((a,b) => b-a);

            let winIdx = -1;
            if(isFlush && isStraight) winIdx = (ranks[0] === 10 || (ranks[0]===2 && ranks[4]===14)) ? 8 : 7;
            else if(valCounts[0] === 4) winIdx = 6;
            else if(valCounts[0] === 3 && valCounts[1] === 2) winIdx = 5;
            else if(isFlush) winIdx = 4;
            else if(isStraight) winIdx = 3;
            else if(valCounts[0] === 3) winIdx = 2;
            else if(valCounts[0] === 2 && valCounts[1] === 2) winIdx = 1;
            else if(valCounts[0] === 2) {
                const pairRank = Object.keys(counts).find(k => counts[k] === 2);
                if(parseInt(pairRank) >= 11) winIdx = 0;
            }

            if(winIdx >= 0) {
                const prize = this.payouts[8 - winIdx] * this.bet;
                this.credits += prize;
                document.getElementById(`rank-${winIdx}`).classList.add('active');
                document.getElementById('status-msg').textContent = i18n[this.lang].win + " +" + prize;
            } else {
                document.getElementById('status-msg').textContent = i18n[this.lang].lose;
            }
            localStorage.setItem('vp_credits', this.credits);
        },

        loadFooter() {
            fetch('../footer.html')
                .then(r => r.ok ? r.text() : '')
                .then(data => {
                    const p = document.getElementById('footer-placeholder');
                    if (p) {
                        p.innerHTML = data;
                        if (typeof lucide !== 'undefined') lucide.createIcons();
                    }
                });
        }
    };

    window.onload = () => game.init();
</script>
<!-- 2026-02-26 15:03:49 -->
</body>
  </html>
